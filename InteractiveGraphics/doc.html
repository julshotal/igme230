<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="PractStyle.css" >
    <link href="https://fonts.googleapis.com/css?family=Comfortaa" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="js/build/three.js"></script>
    <script src="js/Water.js"></script>
    <script src="js/Water2.js"></script>
    <script src="js/build/OrbitControls.js"></script>
    <script src="js/Reflector.js"></script>
    <script src="js/Refractor.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Documentation Page</title>
</head>
<body>
    <div class="info">
        <div class="header">
            <a class="button" href="index.html">Restart</a>
            <a class="up" id="up3" href="page3.html">╱╲</a>
            <a class="button" href="https://threejs.org/">THREE.js</a>
            <a class="sound" href="#">♫</a>
        </div>

        <div id="documentation">
        <div id="writeup">
            <h3>Purpose</h3>
            <p>The purpose of this site is was to create a relaxing interactive sunset simulator by combining interactive graphics with audio. Also, it will serve as a portfolio piece.</p>
            <h3>Wireframes</h3>
            <p></p>
            <h3>Design</h3>
            <p></p>
            <h3>Above and Beyond</h3>
            <p></p>
        </div>

        <div id="sources">
                <a class="button" href="https://freesound.org/people/Setuniman/sounds/165765/">cinematic intro</a>
                <a class="button" href="https://freesound.org/people/BurghRecords/sounds/415151/">running water</a>
                <a class="button" href="https://freesound.org/people/melissapons/sounds/171587/">windy ambience</a>
                <a class="button" href="https://freesound.org/people/DudeAwesome/sounds/387593/">deep breathing</a>
                <a class="button" href="https://freesound.org/people/Kinoton/sounds/393819/">underwater ambience</a>
                <a class="button" href="https://github.com/mrdoob/three.js/blob/master/examples/webgl_shaders_ocean.html">water plane</a>
                <a class="button" href="https://github.com/mrdoob/three.js/blob/master/examples/webgl_shaders_ocean.html">orbit controls</a>
                <a class="button" href="https://threejs.org/docs/#api/en/audio/Audio">audio</a>
                <a class="button" href="https://threejs.org/docs/#api/en/audio/PositionalAudio">positional audio</a>
                <a class="button" href="https://stackoverflow.com/questions/32233805/im-new-to-threejs-how-to-create-a-sky-dome">skydome</a>
                <a class="button" href="https://github.com/mrdoob/three.js/blob/master/examples/webgl_lights_pointlights2.html">point light mesh</a>
                <a class="button" href="https://webgradients.com/?fbclid=IwAR2OPFZuiGUflok-dJ3QNQ2GGJ-KjbOHCIuUukL_OxkRNCVANsygKIpEP7k">sky gradients (modified)</a>
        </div>
    </div>
    </div>
    </body>

    <div id="doc"> 

    </div>

    <script>
           
        //taken from https://stackoverflow.com/questions/20290402/three-js-resizing-canvas
        window.addEventListener( 'resize', onWindowResize, false );

        function onWindowResize(){

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();

            renderer.setSize( window.innerWidth, window.innerHeight );

        }
        
        //page 2
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera( 110, window.innerWidth / window.innerHeight, 0.1, 10000 );
        renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setSize( window.innerWidth, window.innerHeight );

        let container2 = document.querySelector('#doc');
        container2.appendChild(renderer.domElement);

        // create an AudioListener and add it to the camera
        var listener = new THREE.AudioListener();
        camera.add( listener );

        // create a global audio source
        var sound = new THREE.Audio( listener );

        // load a sound and set it as the Audio object's buffer
        var audioLoader = new THREE.AudioLoader();
        audioLoader.load( 'music/underwater.wav', function( buffer ) {
            sound.setBuffer( buffer );
            sound.setLoop( true );
            sound.setVolume( 0.5 );
            sound.play();
        });


        $(".sound").click(function() {
            if(sound.isPlaying == true){
                sound.stop();
                $(".sound").css('textDecoration','line-through');
            } else {
                sound.play();
                $(".sound").css('textDecoration', "none");
            }
        });

        /*---------------------------------------------------skyspere-----------------------------------------------------*/

        createSky("night", scene);

        /*---------------------------------------------------water-------------------------------------------------------*/

        var waterGeo = new THREE.PlaneBufferGeometry( 500, 500 );
				var water = new THREE.Water(
					waterGeo,
					{
						textureWidth: 1000,
						textureHeight: 1000,
						waterNormals: new THREE.TextureLoader().load( 'textures/waternormals.jpg', function ( texture ) {
							texture.wrapS = texture.wrapT = THREE.RepeatWrapping;
						} ),
                        scale: 15,
                        opacity: .3,
                        color: 0xffffff,
                        flowDirection: new THREE.Vector2( 0, -1 )
					}
                );
                
                water.rotation.x = 0;
                scene.add( water );
                  
        /*-----------------------------------------------------Look around-----------------------------------------------------*/

            
        /*-----------------------------------------------------functions and lights-----------------------------------------------------*/

        var ambLight = new THREE.AmbientLight( 0x00ffff,  .9 ); 
        scene.add(ambLight);
     
        camera.position.z = 5;
        function animate() {
            requestAnimationFrame( animate );
	        renderer.render( scene, camera );
        }   

        animate();

        function createSky(name, sceneNum) {
            var skyGeo = new THREE.SphereGeometry(1000, 50, 50); 
            var loader  = new THREE.TextureLoader(),
            texture = loader.load( "img/" + name + ".jpg" );

            var material = new THREE.MeshPhongMaterial({ 
                map: texture,
            });

            var sky = new THREE.Mesh(skyGeo, material);
            sky.material.side = THREE.BackSide;
            sceneNum.add(sky);

        }

    </script>
</body>
</html>